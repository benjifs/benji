<!DOCTYPE HTML>
<html class="sylveon" lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title>benji | sparkles</title>

		<!-- CSS -->
		<link rel="stylesheet" type="text/css" href="/build/css/main.min.css">

		<!-- GENERAL -->
		<meta name="description" content="benji. not the dog.">
		<meta name="keywords" content="">
		<meta name="author" content="benji">
		<meta property="og:title" content="benji">
		<meta property="og:description" name="description" content="benji. not the dog.">
		<meta property="og:url" content="https://benji.dog">
		<meta property="og:image" content="/assets/avatar.png">
		
		<link type="text/plain" rel="author" href="/humans.txt" />

		<!-- ICONS -->
		<link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
		<link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#000000">
		<link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-icon-192x192.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="64x64" href="/assets/icons/favicon-64x64.png">
		<link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#000000">
		<meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
		<meta name="msapplication-config" content="/browserconfig.xml">
		<meta name="theme-color" content="#1f1f1f">
		<link rel="shortcut icon" href="/favicon.ico">

		<!-- FEED -->
		<link rel="feed" href="/feed" type="text/html" title="feed">
		<link rel="feed" href="/all" type="text/html" title="all">
		<link rel="alternate" href="/feed.xml" type="application/rss+xml" title="RSS Feed">
		<link rel="alternate" href="/all.xml" type="application/rss+xml" title="RSS Feed - All Posts">
		<link rel="alternate" href="/feed.atom" type="application/atom+xml" title="RSS (Atom) Feed">
		<link rel="alternate" href="/all.atom" type="application/atom+xml" title="RSS (Atom) Feed - All Posts">
		<link rel="alternate" href="/feed.json" type="application/json" title="JSON Feed">
		<link rel="alternate" href="/all.json" type="application/json" title="JSON Feed - All Posts">

		<!-- RELs -->
		<link rel="authorization_endpoint" href="https://indieauth.com/auth">
		<link rel="token_endpoint" href="https://tokens.indieauth.com/token">
		<link rel="micropub" href="https://micropub.benji.dog/micropub">
		<link rel="micropub_media" href="https://micropub.benji.dog/media">
		<link rel="webmention" href="https://webmention.io/www.benji.dog/webmention">
		<link rel="pingback" href="https://webmention.io/www.benji.dog/xmlrpc">
		<link rel="microsub" href="https://aperture.p3k.io/microsub/419">
	</head>
	<body>
		<header>
			<nav class="menu"><a href="/">~</a><a class="" href="/about">about</a>
				<a class="" href="/now">now</a>
				<a rel="feed" class="" href="/feed">feed</a>
				<a class="" href="/tags">tags</a>
				<img id="light-switch" class="svg sm" onclick="light_switch();"/>
			</nav>
		</header>
		<main>
<section class="page-wrapper">
	<article class="h-entry">
		<details hidden>
	<div class="p-author h-card">
		<a class="p-name u-url u-uid" href="https://benji.dog" rel="me">benji</a>
<img class="u-photo" src="/assets/avatar.png">
<p class="p-note">benji. not the dog.</p>
	</div>
	<a class="u-url" href="/articles/sparkles/"></a>
	<time class="dt-published" datetime="2022-12-01T00:00:00.000Z">2022-12-01T00:00:00.000Z</time>
		<time class="dt-updated" datetime="2022-12-13T00:00:00.000Z">2022-12-13T00:00:00.000Z</time>
	
	<a class="p-category" href="/tag/projects">projects</a>
	<a class="p-category" href="/tag/sparkles">sparkles</a>
	<a class="p-category" href="/tag/micropub-client">micropub client</a>
</details><h1 class="p-name">sparkles</h1>
			<time class="dt-published" datetime="2022-12-01T00:00:00.000Z">Dec 01, 2022</time>
<div class="e-content"><p><span class="img-block"><img src="/assets/images/sparkles-icon.png" alt="sparkles: a micropub client"></span></p>
<p><strong>Update (2022-12-13)</strong>: Did some cleanup to the code so I'm feeling ok about making this public now. Code is available here: <a href="https://github.com/benjifs/sparkles">https://github.com/benjifs/sparkles</a></p>
<hr>
<p>I've been working on a <a href="https://indieweb.org/Micropub/Clients">micropub client</a> on and off for a few months now and since its <a href="https://indieweb.org/2022-12-indieweb-gift-calendar">IndieWeb Gift Calendar</a> season, I figured it was the perfect time to write about it.</p>
<p><strong>tl;dr:</strong> <a href="https://sparkles.sploot.com">sparkles</a> is a micropub client. It supports <a href="https://indieauth.net/">IndieAuth</a> for login and expects a <a href="https://indieweb.org/Micropub/Servers">micropub endpoint</a> to communicate with to publish posts. It supports basic micropub content types and you can also add movies you have watched.</p>
<h2>Motivation</h2>
<p>I wrote a <a href="https://github.com/benjifs/micropub">micropub and media endpoint</a> sometime in 2020 and since then I've been using several micropub clients to post content to my site. There are some extensions I would have liked to add to those but I felt like they were so specific to how I want to publish content to my site that it wouldn't have made sense to add there. I could have also just built the specific additions I wanted but I took this as an opportunity to build the one micropub client I would like to use.</p>
<h2>Development</h2>
<p>Similar to my micropub endpoint, I wanted to build this so it could easily be deployed to <a href="https://www.netlify.com/">Netlify</a> with a single click and some minor environment variable configurations.</p>
<p>I initially tried to keep things as close to vanilla JS as possible but in the end chose to use <a href="https://mithril.js.org/">Mithril.js</a> as a framework. I already use several of the other popular Javascript frameworks in other projects so I took this as an opportunity to learn something new.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a> errors started showing up and the quickest way I figured at the time to handle these errors was to use <a href="https://www.netlify.com/products/functions/">Netlify's functions</a> to proxy requests to the <a href="https://indieauth.net/">IndieAuth</a> and micropub endpoints. There is probably a better way to handle this but I figured this could be future Benji's problem.</p>
<h2>The Actual App</h2>
<p><span class="img-block"><img src="/assets/images/sparkles-menu.jpg" alt="sparkles: main menu"></span></p>
<p>On login there are options to add content based on the basic content types. Clicking on notes for example will open up a basic <code>textarea</code> and an input field for comma separated tags.</p>
<p><span class="img-block"><img src="/assets/images/sparkles-note.jpg" alt="sparkles: adding note content"></span></p>
<p>One of the custom content types that I wanted to support on my site is <a href="/watched">watched</a> movie posts. I currently manually run some code to convert my RSS feed from <a href="https://letterboxd.com/">Letterboxd</a> and it works well enough but ideally this could all be done directly to my site using micropub. For movie search I am using <a href="https://www.omdbapi.com/">OMDb API</a> which gives me all the basic info I would want to display for a movie.</p>
<p><span class="img-block"><img src="/assets/images/sparkles-movie-search.jpg" alt="sparkles: movie search"></span></p>
<p>After a movie is selected, you can select if you have rewatched it and whether or not to rate it.</p>
<p><span class="img-block"><img src="/assets/images/sparkles-movie-add.jpg" alt="sparkles: adding The Empire Strikes Back as a watched post"></span></p>
<p>The last bit of features I wanted to add where all dependent on sparkles being a <a href="https://web.dev/progressive-web-apps/">Progressive Web App (PWA)</a>. With the website installed on my phone as a PWA I could now share content from other apps to sparkles which will let me create a &quot;reply&quot;, &quot;bookmark&quot;, &quot;like&quot;, or &quot;RSVP&quot; post.</p>
<p><span class="img-block"><img src="/assets/images/sparkles-share-android.jpg" alt="Android share menu"></span></p>
<p><span class="img-block"><img src="/assets/images/sparkles-share.jpg" alt="sparkles: handle share target"></span></p>
<p>Lastly, I can also create a quick note or add an image using the <code>shortcuts</code> option.</p>
<p><span class="img-block"><img src="/assets/images/sparkles-shortcuts.jpg" alt="sparkles: shortcut sample"></span></p>
<h2>Issues</h2>
<p>PWA support is sort of iffy in my experience. I think Safari on iOS doesn't have full support for <code><a href="https://developer.mozilla.org/en-US/docs/Web/Manifest/shortcuts">shortcuts</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/Manifest/share_target">share_target</a></code> which I think makes sense since these are still marked experimental.</p>
<p>On Android, only Chrome or Samsung Browser on Samsung devices seem to have access to a <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1243583">WebAPK minting server</a> which is necessary for the full PWA experience.</p>
<p>While the website can still be added as a shortcut, it will lose those key features if its not installed with a browser that supports PWAs.</p>
<h2>Future plans</h2>
<p>The code for <a href="/tags/sparkles">sparkles</a> is <s>still not open source but once I get stuff cleaned up I plan to make it public</s> now on <a href="https://github.com/benjifs/sparkles">GitHub</a>.</p>
<p>I don't usually write out reviews for movies so I completely forgot to include that when building the movie editor out. I plan to add an optional <code>textarea</code> with a checkbox to mark whether or not the content itself contains a spoiler.</p>
<p>The other type of content that I wanted to be able to publish from here are recipes. I have the basic idea for how to structure them but I'm still in the early planning stages on how to handle the different parts of a recipe. I also have to add support for this type of post on my <a href="https://github.com/benjifs/micropub">micropub endpoint</a> first which is why I'm leaving all of this for later.</p>
</div><footer>
	<hr />
	<div class="footer-details">
		<span>
			Posted in&nbsp;<a class="post-type" href="/articles"><img class="svg sm" src="/assets/fa/newspaper-solid.svg" alt="Articles"/></a>&nbsp;on&nbsp;<time class="dt-published" datetime="2022-12-01T00:00:00.000Z">Dec 01, 2022</time>
		</span>
		<a href="http://bnj.pw/b5N70" rel="shortlink">bnj.pw/b5N70</a>
	</div>
		<div class="footer-details">
			<span>Last updated: <time class="dt-updated" datetime="2022-12-13T00:00:00.000Z">Dec 13, 2022</time></span>
		</div>
		
	<ul class="tags">
		<li><a class="p-category" href="/tags/projects">projects</a></li>
		<li><a class="p-category" href="/tags/sparkles">sparkles</a></li>
		<li><a class="p-category" href="/tags/micropub-client">micropub client</a></li>
	</ul>
	<!-- Generalize this to accept any client_id -->


<div class="webmentions" style="text-align: left;">
  <details>
    <summary>Interactions (4)</summary>
    <ul>
        <li class="webmention">
          <p><a href="https://kandr3s.co">Andrés Cárdenas</a>: This looks really cool! I love the UI and hope to take it for a spin once it’s public.
          <a href="https://kandr3s.co/notes/2022-12-10-snomb" datetime="2022-12-10T09:09:22.000+00:00">Dec 10, 2022</a></p>
        </li>
        <li class="webmention">
          <p>Liked by <a href="https://martymcgui.re/">Marty McGuire</a></p>
          
        </li>
        <li class="webmention">
          <p>Mentioned on <a href="https://brntn.me/notes/QIyQ_zVv8UU/">https://brntn.me/notes/QIyQ_zVv8UU/</a></p>
          
        </li>
    </ul>
  </details>
</div>
</footer>
	</article>
</section>
		</main>
		<script>
			if ("serviceWorker" in navigator) {
				navigator.serviceWorker.register("/sw.js");
			}
		</script>
		<script src="/build/js/main.min.js"></script>
		<!--
		D'`r^?K76|{j8x0v.-P1*`;'9+H#FE3fU{".?wvN)(rZvo5Vlqpih.fkd*hgIHdcb[!B^]\Uy<;WPUNrRKoONML.DhBAF?>b%$:9>=<5Y3y1U/.32+0)M-,l$H"!&}|B"!aw|{zs9wpXtsl2Sinmlkjiba'_^c\aZ~k
		-->
	</body>
</html>
