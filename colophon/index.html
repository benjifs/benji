<!DOCTYPE HTML>
<html class="sylveon" lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title>colophon | benji</title>

		<!-- CSS -->
		<link rel="stylesheet" type="text/css" href="/build/css/main.min.css">

		<!-- GENERAL -->
		<meta name="author" content="benji">
		<meta name="description" content="benji. not the dog.">
		<!-- ogp.me -->
		<meta property="og:title" content="colophon">
		<meta property="og:locale" content="en_US">
		<meta property="og:site_name" content="benji">
		<!-- ICONS -->
		<link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
		<link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#000000">
		<link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-icon-192x192.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="64x64" href="/assets/icons/favicon-64x64.png">
		<link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#000000">
		<meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
		<meta name="msapplication-config" content="/browserconfig.xml">
		<meta name="theme-color" content="#1f1f1f">
		<link rel="shortcut icon" href="/favicon.ico">

		<!-- FEED -->
		<link rel="feed" href="/feed" type="text/html" title="feed">
		<link rel="feed" href="/all" type="text/html" title="all">
		<link rel="alternate" href="/feed.xml" type="application/rss+xml" title="RSS Feed">
		<link rel="alternate" href="/all.xml" type="application/rss+xml" title="RSS Feed - All Posts">
		<link rel="alternate" href="/feed.atom" type="application/atom+xml" title="RSS (Atom) Feed">
		<link rel="alternate" href="/all.atom" type="application/atom+xml" title="RSS (Atom) Feed - All Posts">
		<link rel="alternate" href="/feed.json" type="application/json" title="JSON Feed">
		<link rel="alternate" href="/all.json" type="application/json" title="JSON Feed - All Posts">

		<!-- RELs -->
		<link rel="authorization_endpoint" href="https://indieauth.com/auth">
		<link rel="token_endpoint" href="https://tokens.indieauth.com/token">
		<link rel="micropub" href="https://micropub.benji.dog/micropub">
		<link rel="micropub_media" href="https://micropub.benji.dog/media">
		<link rel="webmention" href="https://webmention.io/www.benji.dog/webmention">
		<link rel="pingback" href="https://webmention.io/www.benji.dog/xmlrpc">
		<link rel="microsub" href="https://aperture.p3k.io/microsub/419">
		<link rel="canonical" href="https://benji.dog/colophon/">
		<link type="text/plain" rel="author" href="/humans.txt" />
	</head>
	<body>
		<header>
			<nav class="menu"><a href="/">~</a><a class="" href="/about">about</a>
				<a class="" href="/now">now</a>
				<a rel="feed" class="" href="/feed">feed</a>
				<a class="" href="/tags">tags</a>
				<img id="light-switch" class="svg sm" onclick="light_switch();"/>
			</nav>
		</header>
		<main>
<section class="page-wrapper">
	<article class="h-entry">
		<h1>colophon</h1>
		<div class="e-content">
			<p>The repository for this website is public and can be found on <a href="https://github.com/benjifs/benji">GitHub</a>.</p>
<h3>Tools</h3>
<p>To build the site:</p>
<ul>
<li><a href="https://11ty.dev">11ty</a></li>
<li><a href="https://sass-lang.com/">scss</a></li>
</ul>
<p>To create posts and deploy:</p>
<ul>
<li><a href="https://sparkles.sploot.com">sparkles: a micropub client</a></li>
<li><a href="https://github.com/benjifs/micropub">Micropub and Media endpoint</a></li>
<li><a href="https://netlify.com">Netlify Functions</a></li>
<li><a href="https://digitalocean.com">Digital Ocean</a></li>
</ul>
<p>To receive and send webmentions:</p>
<blockquote>
<p><strong>NOTE:</strong> These work but I want to clean them up and make them their own plugin soon.</p>
</blockquote>
<ul>
<li><a href="https://github.com/benjifs/benji/blob/main/.github/workflows/fetch_webmentions.yml">fetch_webmentions.yml</a></li>
<li><a href="https://github.com/benjifs/benji/blob/main/.github/workflows/send_webmentions.yml">send_webmentions.yml</a></li>
</ul>
<h3>Workflow</h3>
<p>Whenever there's a <code>git push</code> to the <code>main</code> branch, the site is automatically deployed. Initially I set this up to test <strong>three</strong> different targets to deploy to:</p>
<ul>
<li><a href="https://netlify.com">Netlify</a> does this automatically</li>
<li><a href="https://github.com/features/actions">GitHub Actions</a> builds the site and adds the files to a <code>gh-pages</code> branch
<ul>
<li>The same build that is added to the <code>gh-pages</code> branch is uploaded to a Digital Ocean VPS.</li>
</ul>
</li>
<li>After a successful deploy to Digital Ocean, the <a href="https://github.com/benjifs/benji/blob/main/.github/workflows/send_webmentions.yml">send_webmentions.yml</a> action is run which will check for recent posts and send webmentions if it finds any.</li>
<li>Once per day, <a href="https://github.com/benjifs/benji/blob/main/.github/workflows/fetch_webmentions.yml">fetch_webmentions.yml</a> runs and checks if the site has received any webmentions. If it has, it will trigger a redeploy and add those webmentions accordingly.</li>
</ul>
<blockquote>
<p>I plan to remove deploying to GitHub Pages and Digital Ocean and instead stick with Netlify as it seems to build quicker. A build takes under 1 min usually through GitHub Actions which isn't bad but I'd rather go with Netlify as it seems to deploy in about 20s.</p>
</blockquote>
<details>
<summary>New post process</summary>
<pre><code>
     ┌──────────┐
     │ micropub │       ┌────────┐    ╔═════════╗
     │  client  │    ┌─▶│ github │───▶║ netlify ║
     └──────────┘    │  └────────┘    ╚═════════╝
          │          │       │
          │          │       ▼
          ▼          │  ┏━━━━━━━━━┓   ┏━━━━━━━┓
     ┌──────────┐    │  ┃ actions ┃──▶┃ build ┃
     │ micropub │────┘  ┗━━━━━━━━━┛   ┗━━━━━━━┛
     │ endpoint │           ╔════════╗    ║    ╔═══════════╗
     └──────────┘           ║ github ║◀───╨───▶║ benji.dog ║
                            ║ pages  ║         ╚═══════════╝
                            ╚════════╝               │
                                                     ▼
                                              ┏━━━━━━━━━━━━━┓
                                              ┃ webmentions ┃
                                              ┗━━━━━━━━━━━━━┛
</code></pre>
</details>
<h3>Changes</h3>
<p>You can view all past important changes to this website in the <a href="/changelog">changelog</a>.</p>
<h3>Javascript</h3>
<p>Javascript is used to build the site but other than some minor functionality, disabling JS should not impact the experience. <strong>No cookies, tracking, or ads</strong>.</p>

		</div></article>
</section>

		</main>
		<script>
			if ("serviceWorker" in navigator) {
				navigator.serviceWorker.register("/sw.js");
			}
		</script>
		<script src="/build/js/main.min.js"></script>
		<!--
		D'`r^?K76|{j8x0v.-P1*`;'9+H#FE3fU{".?wvN)(rZvo5Vlqpih.fkd*hgIHdcb[!B^]\Uy<;WPUNrRKoONML.DhBAF?>b%$:9>=<5Y3y1U/.32+0)M-,l$H"!&}|B"!aw|{zs9wpXtsl2Sinmlkjiba'_^c\aZ~k
		-->
	</body>
</html>
